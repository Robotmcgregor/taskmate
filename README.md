# READ ME

## Django

![Django flow diagram](./git_images/django_flow.JPG)

MTV = Model View Template

 * Model: databases - backend
 * View: Scripts/processes - backend
 * Template: Html css structure - frontend

## Create new project

1. Create a virtual environment
Using Powershell navigate to the base directory (i.e. cd C:\Users\robot\pydjango)
1. C:\Users\robot\pydjango> python -m venv tmenv
Activate the environment
1. C:\Users\robot\pydjango> tmenv\Scripts\activate

## Install django

1. (tmenv) C:\Users\robot\pydjango> pip install django

## Create project structure
1. cd to project dir: (tmenv) PS C:\Users\robot\pydjango> cd .\django_project\

1. enter command: django-admin startproject: (tmenv) PS C:\Users\robot\pydjango\django_project> django-admin startproject taskmate

## django structure

1. Project vs. App:

* A Django project is the entire web application, including its settings, database configurations, and the main entry point.
* An app is a self-contained module that performs a specific functionality within the project. A project can consist of multiple apps.
1. Project Root:

* The project root directory contains various configuration files and manages the overall project.
    * manage.py: A command-line utility for various tasks such as running the development server, creating database tables, and more.
    * settings.py: Configuration settings for the project, including database settings, middleware, and other application-specific settings.
1 urls.py: Defines the URL patterns for the project.
Apps:

* Each app has its own directory containing its code and resources.
    * models.py: Defines the data models used by the app.
    * views.py: Contains the functions or classes that handle HTTP requests and return appropriate responses.
    * urls.py: Defines URL patterns specific to the app.
    * templates/: Directory for HTML templates used by the app.
    * static/: Directory for static files (CSS, JavaScript, images) used by the app.
1. Database Migrations:

    * migrations/: Contains database migration files generated by Django when changes are made to the data models.
1. Static and Media Files:

    * static/: Project-wide static files such as CSS, JavaScript, and images.
    * media/: User-uploaded media files (e.g., user-uploaded images).
1. Templates:

    * templates/: Project-wide templates, which are typically HTML files that define the structure of the web pages.
1. Virtual Environment:

    * It's common practice to use a virtual environment to isolate project dependencies.
    * requirements.txt: A file listing all the Python packages and their versions required for the project.
1. Other Files:

    * README.md: Documentation for the project.
    * .gitignore: A file specifying which files and directories should be ignored by

### Run server

1. cd to project directory (i.e. (tmenv) PS C:\Users\robot\pydjango\django_project> cd .\taskmate\)
1. run server command: python manage.py runserver

### Migrate database

Note: unapplied migrations

 stop server (cnt + Break)
Run:
 * (tmenv) PS C:\Users\robot\pydjango\django_project\taskmate> python manage.py makemigrations
  * (tmenv) PS C:\Users\robot\pydjango\django_project\taskmate> python manage.py migrate
  

### Run Server again  


### Create and App

1. Stop server
1. (tmenv) PS C:\Users\robot\pydjango\django_project\taskmate> python manage.py startapp {name of app}
1. Add a url.py into the app directory
1. add the new app into the settings script under "installed apps"

    ![new app to settings](./git_images/installed_apps.JPG)

5. Add path to primary site url.py (i.e. path('task/', include('todolist.urls')))

    ![alt text](./git_images/add_app_path_to_mainurl.JPG)

6. Copy and paste the main site url.py data to the app url.py
1. make the following edits

    ![edits in app url](./git_images/app_urls.JPG)

8. update app views so that something happens

    ![view edit](./git_images/app_view_create%20function.JPG)


---------------------------------------------------------------------------------------------

## TEMPLATES

1. Create templates dir in the project app (i.e. taskmate/taskmate/todolist/templates)
1. Create sub dirs: css, js, images.
1. Create html page (i.e. task.html or todolist.html)
1. Use bootstrap to design app templates.

### Update view

1. Update the todolist return: return render(request, 'todolist.html', {})
note: {} Elements are displayed as a dictionary.

## Jinja 2
For info look here:

## Database management
1. Stop server
1. Run: (tmenv) PS C:\Users\robot\pydjango\django_project\taskmate> python manage.py createsuperuser
1. Add superuser information

### Create database model
1. on app models.py create a model class
1. stop server
1. make migrations
1. migrate

### Add a form to update sql db
1. add form into html
1. Add form.py into app dir
1. Add class to forms.py

    ![forms.py class](./git_images/forms_py.JPG)

1. update view and enter: from todolist.forms import TaskForm

GET and POST methods

## GET Methods

### Pagination
#### Views
1. From django.core.paginator import Paginator
1. Add parenthesis after TaskList.objects (i.e.all_tasks = TaskList.objects.all())
1. Create paginator pass data and number of items per page: paginator = Paginator(all_tasks, 5)

    ![paginator](./git_images/paginator.JPG)

#### HTML
1. Enter Bootstrap code at the bottom of the file.

    ![paginator html](./git_images/paginator_html.JPG)

## NOTES

1. DEBUG=True: in production environment
1. config database before running server for the first time as it will instal a version of the database
1. migrations: to do with the database


## Authentication

taskmate views: 
from django.contrib.auth.decorators import login_required
above function you require login
@login_required

Settings.py 
LOGIN_URL = "login"
